import pytest
from selenium import webdriver
from selenium.webdriver.common.by import By
from selenium.webdriver.support.ui import WebDriverWait
from selenium.webdriver.support import expected_conditions as EC

@pytest.fixture
def driver():
    options = webdriver.ChromeOptions()
    options.page_load_strategy = 'eager'
    driver = webdriver.Chrome(options=options)
    yield driver
    driver.quit()

def test_service_and_support_text_exists(driver):

    driver.get("https://www.komus.ru")

    # Ожидаем загрузку основного контента (например, поисковой строки)
    try:
        # Ждём появления элемента с текстом "Сервис и поддержка"
        service_link = WebDriverWait(driver, 10).until(
            EC.presence_of_element_located((By.XPATH, "//a[contains(text(), 'Поддержка и сервис')]"))
        )

        # Проверяем, что элемент видим
        assert service_link.is_displayed(), "Элемент не отображается"

        # Проверяем текст
        text = service_link.text.strip()
        assert text == "Поддержка и сервис", f"Ожидался текст 'Поддержка и сервис', получено: '{text}'"

        print("✅ Текст 'Поддержка и сервис' найден и отображается корректно")

    except Exception as e:
        pytest.fail(f"❌ Не удалось найти или проверить текст: {str(e)}")
